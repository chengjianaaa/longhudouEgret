var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,o){function s(e){try{l(i.next(e))}catch(t){o(t)}}function a(e){try{l(i["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,a)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,o=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(s=l.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){l.label=n[1];break}if(6===n[0]&&l.label<s[1]){l.label=s[1],s=n;break}if(s&&l.label<s[2]){l.label=s[2],l.ops.push(n);break}s[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(i){n=[6,i],o=0}finally{r=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var r,o,s,a,l={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},MenuUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Menu.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.help.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showTips,this)},t.prototype.showTips=function(){$InfoPanal.visible=!0,$InfoPanal.tipsGroup.visible=!0,$InfoPanal.settleGroup.visible=!1,$InfoPanal.recordGroup.visible=!1,$InfoPanal.historyGroup.visible=!1},t}(eui.Component);__reflect(MenuUI.prototype,"MenuUI");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?i(r):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var CoinBtnUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/CoinBtn.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.getPrice()},t.prototype.getPrice=function(){var e=this;this.label1.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseCoin.bind(this,this.label1),this),this.label2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseCoin.bind(this,this.label2),this),this.label3.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseCoin.bind(this,this.label3),this),this.label4.addEventListener(egret.TouchEvent.TOUCH_TAP,this.chooseCoin.bind(this,this.label4),this),$ContractInstance.methods.getPrice().call().then(function(t){e.label1.text=t[0],e.label2.text=t[1],e.label3.text=t[2],e.label4.text=t[3]})},t.prototype.chooseCoin=function(e,t){switch($BetCoinChoose=e.text,e.name){case"label1":this.coin1Xz.visible=!0,this.coin2Xz.visible=!1,this.coin3Xz.visible=!1,this.coin4Xz.visible=!1;break;case"label2":this.coin1Xz.visible=!1,this.coin2Xz.visible=!0,this.coin3Xz.visible=!1,this.coin4Xz.visible=!1;break;case"label3":this.coin1Xz.visible=!1,this.coin2Xz.visible=!1,this.coin3Xz.visible=!0,this.coin4Xz.visible=!1;break;case"label4":this.coin1Xz.visible=!1,this.coin2Xz.visible=!1,this.coin3Xz.visible=!1,this.coin4Xz.visible=!0}},t}(eui.Component);__reflect(CoinBtnUI.prototype,"CoinBtnUI");var CoinNumUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/CoinNumber.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.operation()},t.prototype.operation=function(){},t}(eui.Component);__reflect(CoinNumUI.prototype,"CoinNumUI");var CroupierUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Croupier.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.operation()},t.prototype.operation=function(){},t}(eui.Component);__reflect(CroupierUI.prototype,"CroupierUI");var HistorySkinUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/HistorySkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.trend.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showTrend,this),this.record.addEventListener(egret.TouchEvent.TOUCH_TAP,this.showRecord,this)},t.prototype.showTrend=function(){$InfoPanal.getResultHistory(),$InfoPanal.visible=!0,$InfoPanal.settleGroup.visible=!1,$InfoPanal.tipsGroup.visible=!1,$InfoPanal.recordGroup.visible=!1,$InfoPanal.historyGroup.visible=!0},t.prototype.showRecord=function(){$InfoPanal.getBetRecord(),$InfoPanal.visible=!0,$InfoPanal.recordGroup.visible=!0,$InfoPanal.settleGroup.visible=!1,$InfoPanal.tipsGroup.visible=!1,$InfoPanal.historyGroup.visible=!1},t}(eui.Component);__reflect(HistorySkinUI.prototype,"HistorySkinUI");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),e=this.getInfo(),e.then(function(){t.createGameScene()}),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var i=new eui.Theme("resource/default.thm.json",e.stage);i.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.getInfo=function(){var e=this;return new Promise(function(t,n){try{RES.getResByUrl("contract/playGame.json",function(e){$ContractInstance=new $Web3.eth.Contract(e.abi,$ContractAddress),t()},e,RES.ResourceItem.TYPE_JSON)}catch(i){console.error(i)}})},t.prototype.createGameScene=function(){var e=new TableUI;this.addChild(e);var t=(e.width,e.height),n=this.stage.stageWidth,i=this.stage.stageHeight;e.y=(i-t)/2,e.x=165;var r=new CroupierUI;this.addChild(r);var o=r.width,s=r.height;r.x=n-o,r.y=(i-s)/2,$balance=new BalanceUI,this.addChild($balance);var a=$balance.width,l=$balance.height;$balance.x=n-a,$balance.y=i-l;var c=new CoinBtnUI;this.addChild(c);var u=c.height;c.y=(i-u)/2;var h=new MenuUI;this.addChild(h);var p=h.width;h.x=n-p,h.y=25;var d=new HistorySkinUI;this.addChild(d);var f=(d.width,d.height);d.y=i-f,$Alert=new AlertUI,this.addChild($Alert),$InfoPanal=new InfoPanalUI,$InfoPanal.bgBack.width=n,$InfoPanal.bgBack.height=i,this.addChild($InfoPanal);var v=new LoadingUI;this.stage.addChild(v),RES.loadGroup("poker",0,v),this.stage.removeChild(v),$loading=new DIYLoadingUI,this.addChild($loading)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.prototype.startAnimation=function(e){},t}(eui.UILayer);__reflect(Main.prototype,"Main");var BalanceUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/Balance.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.getBalance(),setInterval(this.getBalance.bind(this),1e4)},t.prototype.getBalance=function(){var e=this;$ContractInstance.methods.getCurrentBalance().call().then(function(t){e.balancePool.text=Number($Web3.utils.fromWei(t,"ether")).toFixed(2)}),$Web3.eth.getBalance($MyAddress).then(function(t){e.myBalance.text=Number($Web3.utils.fromWei(t,"ether")).toFixed(2)})},t}(eui.Component);__reflect(BalanceUI.prototype,"BalanceUI");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var tr=egret.sys.tr,TableUI=function(e){function t(){var t=e.call(this)||this;return t.myBet=[0,0,0],t.currentChoose="",t.skinName="resource/eui_skins/BetTable.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.operation()},t.prototype.operation=function(){var e=this;this.notice1Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betFun.bind(this,this.notice1Group),this),this.notice2Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betFun.bind(this,this.notice2Group),this),this.notice3Group.addEventListener(egret.TouchEvent.TOUCH_TAP,this.betFun.bind(this,this.notice3Group),this),$ContractInstance.methods.getBlockTime().call().then(function(t){e.settleTime=t[0]}),this.getTime(),this.watchBet()},t.prototype.unlockAccount=function(){var e=this;return new Promise(function(t,n){$Web3.eth.personal.unlockAccount($MyAddress,e.getActiveAccountPwd(),function(i,r){i&&(-1!==i.message.indexOf("file")?e.uploadKeyStore().then(function(i){i&&$Web3.eth.personal.unlockAccount($MyAddress,e.getActiveAccountPwd(),function(e,i){t(i),n(e)})}):n(i.message),n(i)),r&&t(r)})})},t.prototype.betFun=function(e,t){var n=this,i=(Number($balance.balancePool.text),Number($balance.myBalance.text));if(this.serverTime<5)return $Alert.label.text="下注失败！剩余时间小于5s不能下注！",void($Alert.visible=!0);if(1>i)return $Alert.label.text="余额不足，不能下注！",void($Alert.visible=!0);if("0"==$BetCoinChoose)return $Alert.label.text="请先选择下注金额！",void($Alert.visible=!0);var r=-1;switch(e.name){case"betLong":r=0,this.myBet[0]=$BetCoinChoose;break;case"betHu":r=1,this.myBet[2]=$BetCoinChoose;break;case"betHe":r=2,this.myBet[1]=$BetCoinChoose}this.currentChoose=r+"";var o=$Web3.utils.toWei($BetCoinChoose,"ether");$loading.visible=!0,$loading.label.text="正在下注···",this.unlockAccount().then(function(e,t){e?$ContractInstance.methods.sendBetInfo($MyAddress,r,parseInt(Math.random()*Math.pow(10,12)),o).send({from:$MyAddress,value:o,gas:1e6,txType:0}).on("error",function(e){$loading.visible=!1,$Alert.label.text=String(e),$Alert.visible=!0}).on("receipt",function(e){$loading.visible=!1;try{var t=new egret.HttpRequest;t.responseType=egret.HttpResponseType.TEXT,t.open($uploadTxUrl,egret.HttpMethod.POST),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),t.send(JSON.stringify({type:"1",sendAddr:e.from,revAddr:e.to,txHash:e.transactionHash,blockNum:e.blockNumber,amount:$BetCoinChoose})),t.addEventListener(egret.Event.COMPLETE,function(e){e.currentTarget},n),t.addEventListener(egret.IOErrorEvent.IO_ERROR,function(){$Alert.visible=!0,$Alert.label.text="上传交易记录失败！"},n)}catch(i){$Alert.visible=!0,$Alert.label.text=String(i)}}):($loading.visible=!1,$Alert.visible=!0,$Alert.label.text="下注失败，keystore not found")})},t.prototype.watchBet=function(){var e=this;$ContractInstance.events.returnBetResult().on("data",function(t){t.returnValues&&t.returnValues._addr==$MyAddress&&($loading.visible=!1,t.returnValues._bool?($Alert.visible=!0,$Alert.label.text="下注成功！请等待出牌结果！",$BetRecord.push({betChoose:e.currentChoose,betCoins:$BetCoinChoose+" FOF",winCoin:"",result:""})):($Alert.visible=!0,$Alert.label.text="下注失败！本局已封盘（奖池金额不够）"))}).on("error",function(e){e&&event.returnValues._addr==$MyAddress&&($loading.visible=!1,$Alert.visible=!0,$Alert.label.text="下注失败！")})},t.prototype.getTime=function(){try{this.timer&&clearInterval(this.timer);var e=new egret.HttpRequest;e.responseType=egret.HttpResponseType.TEXT,e.open($getTimerTimeUrl,egret.HttpMethod.GET),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(),e.addEventListener(egret.Event.COMPLETE,this.onGetComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onGetIOError,this)}catch(t){$loading.visible=!1,setTimeout(function(){$Alert.visible=!0,$Alert.label.text="节点异常，请联系管理员！"},300)}},t.prototype.onGetComplete=function(e){var t=e.currentTarget,n=Number(t.response);this.serverTime=0>n?0:n,this.time.text=this.serverTime+"S",this.timer=setInterval(this.timerBegin.bind(this),1e3)},t.prototype.onGetIOError=function(e){$loading.visible=!1,setTimeout(function(){$Alert.visible=!0,$Alert.label.text="网络连接错误，请检查网络！"},300)},t.prototype.timerBegin=function(){this.serverTime<=5&&this.settlement(),this.serverTime>1&&(this.serverTime--,this.time.text=this.serverTime+"S")},t.prototype.settlement=function(){var e=this;1==this.serverTime&&(this.serverTime=0,this.time.text=this.serverTime+"S",$loading.visible=!0,$loading.label.text="正在结算···",$InfoPanal.visible=!1,$Alert.visible=!1),$ContractInstance.methods.getBlockTime().call().then(function(t){var n=t[0].toString(10);if(e.settleTime!=n){e.settleTime=n;var i=Number(t[4][0].toString(10)),r=Number(t[4][1].toString(10));i==r&&(r+=13);var o=i%13+1,s=r%13+1;$loading.visible=!1,$InfoPanal.tipsGroup.visible=!1,$InfoPanal.recordGroup.visible=!1,$InfoPanal.historyGroup.visible=!1,$Alert.visible=!1,$InfoPanal.longWin.visible=o>s,$InfoPanal.huWin.visible=s>o,$InfoPanal.he.visible=o==s,$InfoPanal.longCoin.text=e.myBet[0]+" FOF",$InfoPanal.huCoin.text=e.myBet[2]+" FOF",$InfoPanal.heCoin.text=e.myBet[1]+" FOF";var a="";a=13>i?"fangkuai":26>i?"heitao":39>i?"hongtao":"meihua",$InfoPanal.longPoker.source="resource/assets/longhudou/poker/"+o+"_"+a+".png",$InfoPanal.huPoker.source="resource/assets/longhudou/poker/"+s+"_"+a+".png",egret.Tween.get(e.longRes).to({skewY:-90},0).to({skewY:0},700).call(function(){e.longRes.source="resource/assets/longhudou/poker/"+o+"_"+a+".png"}).to({skewY:90},700),egret.Tween.get(e.huRes).to({skewY:-90},0).to({skewY:0},700).call(function(){e.huRes.source="resource/assets/longhudou/poker/"+s+"_"+a+".png"}).to({skewY:90},700),e.myBet=e.myBet.map(function(e){return Number(e)});var l=0;l=o>s?-1*e.myBet[0]+e.myBet[1]+e.myBet[2]:s>o?e.myBet[0]+e.myBet[1]+-1*e.myBet[2]:e.myBet[0]+-8*e.myBet[1]+e.myBet[2],$InfoPanal.winCoin.text=-1*l+" FOF",$BetRecord.forEach(function(e){e.result=o>s?"0":o==s?"2":"1",e.winCoin=(e.result==e.betChoose?"+":"-")+e.betCoins}),setTimeout(function(){$InfoPanal.visible=!1,$InfoPanal.visible=!0,$InfoPanal.settleGroup.visible=!0},3e3),e.myBet=[0,0,0],setTimeout(function(){$InfoPanal.visible=!1,egret.Tween.get(e.longRes).to({skewY:90},0).to({skewY:0},700).call(function(){e.longRes.source="resource/assets/longhudou/poker/poker_back.png"}).to({skewY:-90},700),egret.Tween.get(e.huRes).to({skewY:90},0).to({skewY:0},700).call(function(){e.huRes.source="resource/assets/longhudou/poker/poker_back.png"}).to({skewY:-90},700)},6e3),e.getTime()}})},t.prototype.getActiveAccountPwd=function(){return $privateKey.substring($privateKey.length-9)},t.prototype.getKeyStore=function(){return $Web3.eth.accounts.encrypt($privateKey,this.getActiveAccountPwd())},t.prototype.uploadKeyStore=function(){var e=this;return new Promise(function(t,n){var i=e.getKeyStore(),r=new Date,o=["UTC--",r.toJSON().replace(/:/g,"-"),"--",$MyAddress.toString("hex")].join(""),s=new egret.HttpRequest;s.responseType=egret.HttpResponseType.TEXT,s.open($uploadKeyStoreUrl,egret.HttpMethod.POST),s.setRequestHeader("Content-Type","application/json");var a=[o,JSON.stringify(i)];s.send(JSON.stringify({jsonrpc:"2.0",method:"eth_uploadkeyfile",params:a,id:1})),s.addEventListener(egret.Event.COMPLETE,function(e){var i=e.currentTarget;1==JSON.parse(i.response).id?t(!0):n(!1)},e),s.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("error:"+String(e)),n(!1)},e)})},t}(eui.Component);__reflect(TableUI.prototype,"TableUI");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,i){function r(e){t.call(i,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(i))}var s=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(i,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),r(e),egret.callLater(function(){t.call(i,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var AlertUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/modal/AlertSkin.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.operation()},t.prototype.operation=function(){var e=this;this.visible=!1,this.btn.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.visible=!1,e.label.text="错误！"},this)},t}(eui.Component);__reflect(AlertUI.prototype,"AlertUI");var DIYLoadingUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/modal/Loading.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.operation()},t.prototype.operation=function(){this.visible=!1,this.playAnimation(this.loop,!0)},t.prototype.playAnimation=function(e,t){if(t)for(var n in e.items)e.items[n].props={loop:!0};e.play()},t}(eui.Component);__reflect(DIYLoadingUI.prototype,"DIYLoadingUI");var InfoPanalUI=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/eui_skins/modal/InfoPanal.exml",t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.operation()},t.prototype.operation=function(){var e=this;this.visible=!1,this.close.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.visible=!1},this),this.ruleLabel.text="规则\n1、智能合约只派两门牌：龙、虎。每门各派一只牌。\n2、牌面点数由A到K，A为最小，K为最大，不区分花色，点数大者获胜，牌面点数大小顺序: K、Q、J、10、9、8、7、6、5、4、3、2、A，点数相同则为和。\n3、玩家可投注龙、虎、和三门，如买中龙或虎，则1赔1，两门牌相同即为和，买和的赔率为1赔8。\n赔率\n1、下注龙, 1赔1。\n2、下注虎, 1赔1。\n3、下注和, 1赔8。"},t.prototype.getResultHistory=function(){var e=this;$ContractInstance.methods.getResultHistory().call().then(function(t){for(var n=0,i=0,r=0,o=0,s=0,a=1;a<=t.length;a++){var l="resource/assets/longhudou/level1modal/";switch(t[a-1]){case"0":l+="cp_loong.png",r++;break;case"1":l+="cp_tiger.png",o++;break;case"2":l+="cp_he.png",s++}var c=new eui.Image;c.source=l,c.x=n+52,c.y=i+52,c.anchorOffsetX=52,c.anchorOffsetY=52,c.skewY=180,e.hisScrollerG.addChild(c),i+=140,a%8==0&&(n+=130,i=0)}e.totalLongBet.text=String(r),e.totalHuBet.text=String(o),e.totalHeBet.text=String(s)})},t.prototype.getBetRecord=function(){for(var e=0;e<$BetRecord.length;e++)this.getImg($BetRecord[e].betChoose,e,130),this.getLabel($BetRecord[e].betCoins,e,430),this.getLabel($BetRecord[e].winCoin,e,700),this.getImg($BetRecord[e].result,e,940)},t.prototype.getImgUrl=function(e){var t="resource/assets/longhudou/level1modal/";switch(e){case"0":t+="cp_loong.png";break;case"1":t+="cp_tiger.png";break;case"2":t+="cp_he.png";break;default:t=""}return t},t.prototype.getImg=function(e,t,n){if(""!=this.getImgUrl(e)){var i=new eui.Image;i.source=this.getImgUrl(e),i.anchorOffsetX=52,i.anchorOffsetY=52,i.skewY=180,i.x=150+120*t,i.y=n,this.recordG.addChild(i)}},t.prototype.getLabel=function(e,t,n){var i=new eui.Label;i.text=e,i.width=130,i.height=30,i.anchorOffsetX=65,i.anchorOffsetY=15,i.skewY=180,i.rotation=-90,i.textColor="#8d7257",this.recordG.addChild(i),i.x=150+120*t,i.y=n},t}(eui.Component);__reflect(InfoPanalUI.prototype,"InfoPanalUI");var $getTimerTimeUrl="http://39.104.81.103:8089",$uploadKeyStoreUrl="http://39.104.81.103:8551",$uploadTxUrl="http://39.104.81.103/api/addTx.php",$MyAddress="0xA5B725E03Ad76Ad9be88CBb3207D5a306C58600f",$privateKey="0x873f8691f035c7217f2082ed999bbd9ef1b124b7c9be2dfe239a95c3eb1a6be0",$ContractAddress="0x17287737509341a83C7B889256E7f53e1416f1c5",$ContractInfo,$ContractInstance,$balance,$Alert,$InfoPanal,$BetCoinChoose="0",$loading,$BetRecord=[];